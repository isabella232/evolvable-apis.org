var pageComponent=webpackJsonppageComponent([5],{282:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),s=o(l),p=n(2),u=o(p);n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19);var h=n(283),m=o(h),c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(s.default);u.default.register(c,m.default),t.default=c},283:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.templates=t.pajfe=void 0;var l,s=n(1),p=o(s),u=n(2),h=o(u);goog.loadModule(function(e){function t(e,t,o){var l=function(){r("article",null,null,"id","1"),r("h2"),i("Context"),a("h2"),r("p"),i("Let’s say that you have created a service that returns the list of members (persons) of your site. Initially, you modeled the list to contain the basic information for each of those persons:"),a("p"),p({code:"GET api/members",mode:"text"},null,o),r("p"),i("And the service returns that list, for example with the following structure:"),a("p"),p({code:'{\n   "members" : [\n     {\n      "gender": "female",\n      "name": "Sophia Hart",\n      "birthDate": "1975-04-12T00:00Z",\n      "email": "sophia.hart@example.com",\n     },\n     {\n      "gender": "male",\n      "name": "John Doe",\n      "birthDate": "1977-03-15T00:00Z",\n      "email": "john.doe@email.com",\n     }     \n   ]\n}',mode:"javascript"},null,o),r("p"),i("And it seems right at first, it serves it purpose. But soon new members start to register to your site, and the list starts growing, and growing until it reaches for example 1.000 users."),a("p"),r("p"),i("That’s a big amount of information to retrieve at once, and, on top of that, probably your API consumer is not going to show to its user all that information at once (the user probably won’t go through a 1.000 items list in any case)."),a("p"),a("article"),r("article",null,null,"id","2"),r("h2"),i("Need"),a("h2"),r("p"),i("At that point you decide that you need to add some pagination mechanism (you will also add want to add filtering mechanisms to your API, but you still will benefit from pagination in the case the request does not include any filtering criteria)."),a("p"),a("article"),r("article",null,null,"id","3"),r("h2"),i("Solution"),a("h2"),r("p"),i("So, let’s start with an outline of which information is important to handle the pagination:"),a("p"),r("ol"),r("li"),r("p"),i("The first, of course is the list of contents (in this case, the members). That does not change"),a("p"),a("li"),r("li"),r("p"),i("Adding information on the page in which you are, the number of elements contained on the page, optionally the total number of elements (or approximation) or the total number of pages."),a("p"),a("li"),r("li"),r("p"),i("Some links to navigate to"),a("p"),r("ul"),r("li"),r("p"),i("The next page of the search (if there is one)s"),a("p"),a("li"),r("li"),r("p"),i("The previous page (if you are not returning the first one)"),a("p"),a("li"),r("li"),r("p"),i("The very first page."),a("p"),a("li"),r("li"),r("p"),i("Optionally the very last page."),a("p"),a("li"),a("ul"),a("li"),a("ol"),r("p"),i("So, the first change to our response design will be to wrap, or embed the list of items in an specific property which contains that list:"),a("p"),p({code:'{\n  "_embedded" : {\n    "members" : [\n\n        /*...*/\n     ]\n  }\n}',mode:"javascript"},null,o),r("p"),i("Now we can add the information of the number of elements, and how many elements we are returning as part of the current page:"),a("p"),p({code:'{\n  "count" : 20,\n  "total" : 1017,\n  "_embedded" : {\n    "members" : [\n        /*...*/\n     ]\n  }\n}',mode:"javascript"},null,o),r("p"),i("Now, the last step is adding, information to allow to navigate to the first, previous and/or next pages, depending on the page that your are returning. In order to add those links, we are going to stick to the standards, and there is one that addresses specifically how to add links: The "),r("a",null,null,"href","https://www.iana.org/assignments/link-relations/link-relations.xml"),i("IANA Link relations"),a("a"),i(". We will group all those navigation links under the same attribute:"),a("p"),p({code:'{\n  "_links": {\n      "self": {\n          "href": "http://example.org/api/members?page=3"\n      },\n      "first": {\n          "href": "http://example.org/api/members"\n      },\n      "prev": {\n          "href": "http://example.org/api/members?page=2"\n      },\n      "next": {\n          "href": "http://example.org/api/members?page=4"\n      },\n      "last": {\n          "href": "http://example.org/api/members?page=51"\n      }\n  },\n  "count" : 20,\n  "total" : 1017,\n  "_embedded" : {\n    "members" : [\n       {\n        "gender": "female",\n        "name": "Sophia Hart",\n        "birthDate": "1975-04-12T00:00Z",\n        "email": "sophia.hart@example.com",\n       },\n       {\n        "gender": "male",\n        "name": "John Doe",\n        "birthDate": "1977-03-15T00:00Z",\n        "email": "john.doe@email.com",\n       }     \n     ]\n  }\n}',mode:"javascript"},null,o),r("p"),i("In this example, we have used the structure and attribute names that "),r("a",null,null,"href","https://en.wikipedia.org/wiki/Hypertext_Application_Language"),i("HAL"),a("a"),i(" proposes. There are some other alternatives based on Collection+JSON, Siren, or others."),a("p"),r("p"),s({section:e.page},null,o),a("p"),a("article"),r("input",null,null,"type","hidden","value",e.page.title),a("input"),r("input",null,null,"type","hidden","value",e.site.title),a("input")};u(n.$$assignDefaults({content:l},e),null,o)}goog.module("pajfe.incrementaldom");var n=goog.require("soy");goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var o=goog.require("incrementaldom"),r=o.elementOpen,a=o.elementClose,i=(o.elementVoid,o.elementOpenStart,o.elementOpenEnd,o.text),s=(o.attr,h.default.getTemplate("DocsList.incrementaldom","render")),p=h.default.getTemplate("ElectricCode.incrementaldom","render"),u=h.default.getTemplate("guide.incrementaldom","render");return e.render=t,goog.DEBUG&&(t.soyTemplateName="pajfe.render"),e.render.params=["page","site"],e.render.types={page:"?",site:"?"},e.templates=l=e,e});var m=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(p.default);h.default.register(m,l),t.pajfe=m,t.templates=l,t.default=l}},[282]);